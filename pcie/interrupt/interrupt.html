<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>中断 &#8212; WordCount 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="JFF" href="../../jff/jff.html" />
    <link rel="prev" title="PCIe" href="../pcie.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="id1">
<h1>中断<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h1>
<section id="id2">
<h2>中断的两种方式<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<ul>
<li><dl>
<dt>传统方式(INTx)</dt><dd><ul class="simple">
<li><p>PCI 系统中</p></li>
</ul>
<p>在最早的PCI总线系统中，每个设备的中断是通过实际的硬件连线连接到CPU
的中断控制器上，现在基本不使用了，可以忽略。</p>
<figure class="align-center" id="id3">
<a class="reference external image-reference" href="_images/legacy_interrupt_example.png"><img alt="../../_images/legacy_interrupt_example.png" src="../../_images/legacy_interrupt_example.png" /></a>
<figcaption>
<p><span class="caption-text"><em>Legacy Interrupt Example</em></span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>PCIe 系统中</p></li>
</ul>
<p>在后来的PCIe系统中为了兼容传统的PCI设备会通过Message来对传统的中断进行模拟。</p>
<figure class="align-center" id="id4">
<a class="reference external image-reference" href="_images/interrupt_delivery_options_in_PCIe_sytem.png"><img alt="../../_images/interrupt_delivery_options_in_PCIe_sytem.png" src="../../_images/interrupt_delivery_options_in_PCIe_sytem.png" /></a>
<figcaption>
<p><span class="caption-text"><em>Interrupt Delivery Options in PCIe System</em></span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Interrupt Registers</p></li>
</ul>
<p>在PCI配置空间里面与INTx相关的寄存器。</p>
<figure class="align-center" id="id5">
<a class="reference external image-reference" href="_images/interrupt_registers_in_PCI_configuration_header.png"><img alt="../../_images/interrupt_registers_in_PCI_configuration_header.png" src="../../_images/interrupt_registers_in_PCI_configuration_header.png" /></a>
<figcaption>
<p><span class="caption-text"><em>Interrupt Registers in PCI Configuration Header</em></span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id6">
<a class="reference external image-reference" href="_images/configuration_command_register-interrupt_disable_field.png"><img alt="../../_images/configuration_command_register-interrupt_disable_field.png" src="../../_images/configuration_command_register-interrupt_disable_field.png" /></a>
<figcaption>
<p><span class="caption-text"><em>Configuration Command Register — Interrupt Disable Field</em></span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Interrupt disable bit在复位时会被清除从而允许设备产生INTx中断，但是软件可以置位
该bit来阻止设备产生中断。需要注意的是，该bit对MSI中断没有影响，MSI中断
通过 MSI Capability structure 中的 Command Register 来使能或者禁用，然而，当使能
MSI中断时INTx中断会被自动禁用。</p>
<figure class="align-center" id="id7">
<a class="reference external image-reference" href="_images/configuration_status_register-interrupt_status_field.png"><img alt="../../_images/configuration_status_register-interrupt_status_field.png" src="../../_images/configuration_status_register-interrupt_status_field.png" /></a>
<figcaption>
<p><span class="caption-text"><em>Configuration Status Register — Interrupt Status Field</em></span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Interrupt status bit置位时说明有中断发生。需要注意，当桥在转发下游设备模拟INTx
中断的消息时不会对该位造成影响。</p>
<ul class="simple">
<li><p>PCIe系统中对INTx的模拟</p></li>
</ul>
<figure class="align-center" id="id8">
<a class="reference external image-reference" href="_images/example_of_INTx_messages_to_virtualize_INTA-INTD.png"><img alt="../../_images/example_of_INTx_messages_to_virtualize_INTA-INTD.png" src="../../_images/example_of_INTx_messages_to_virtualize_INTA-INTD.png" /></a>
<figcaption>
<p><span class="caption-text"><em>Example of INTx Messages to Virtualize INTA#‐INTD# Signal Transitions</em></span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id9">
<a class="reference external image-reference" href="_images/INTx_message_format_and_type.png"><img alt="../../_images/INTx_message_format_and_type.png" src="../../_images/INTx_message_format_and_type.png" /></a>
<figcaption>
<p><span class="caption-text"><em>INTx Message Format and Type</em></span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</dd>
</dl>
</li>
<li><p>基于消息的方式</p>
<ul class="simple">
<li><p>MSI</p></li>
<li><p>MSI-X</p></li>
</ul>
</li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../pcie.html">PCIe</a><ul>
      <li>Previous: <a href="../pcie.html" title="previous chapter">PCIe</a></li>
      <li>Next: <a href="../../jff/jff.html" title="next chapter">JFF</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, cheng.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/pcie/interrupt/interrupt.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>